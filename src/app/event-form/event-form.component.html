
<div class="event-form-container">
  <div class="event-form-card">
    <h2>{{ event ? 'Modifier l\'événement' : 'Créer un nouvel événement' }}</h2>
    <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="event-form">
     
      <div class="form-row">
        <div class="form-col">
          <div class="form-group">
            <label for="title">Titre *</label>
            <input 
              type="text" 
              id="title" 
              formControlName="title"
              class="form-control"
              [class.is-invalid]="hasError('title', 'required') || hasError('title', 'minlength') || hasError('title', 'maxlength')"
              placeholder="Ex: Conférence Angular">
            <div class="error-message" *ngIf="hasError('title', 'required') || hasError('title', 'minlength') || hasError('title', 'maxlength')">
              <small>{{ getErrorMessage('title') }}</small>
            </div>
          </div>

          
          <div class="form-group">
            <label for="date">Date *</label>
            <input 
              type="date" 
              id="date" 
              formControlName="date"
              class="form-control"
              [class.is-invalid]="hasError('date', 'required') || hasError('date', 'futureDate')">
            <div class="error-message" *ngIf="hasError('date', 'required') || hasError('date', 'futureDate')">
              <small>{{ getErrorMessage('date') }}</small>
            </div>
          </div>
        </div>

        <div class="form-col">
          <div class="form-group">
            <label for="location">Localisation</label>
            <input 
              type="text" 
              id="location" 
              formControlName="location"
              class="form-control"
              [class.is-invalid]="hasError('location', 'maxlength')"
              placeholder="Ex: Paris, France">
            <div class="error-message" *ngIf="hasError('location', 'maxlength')">
              <small>{{ getErrorMessage('location') }}</small>
            </div>
          </div>

          <div class="form-group">
            <label for="maxParticipants">Nombre de places *</label>
            <input 
              type="number" 
              id="maxParticipants" 
              formControlName="maxParticipants"
              class="form-control"
              [class.is-invalid]="hasError('maxParticipants', 'required') || hasError('maxParticipants', 'min') || hasError('maxParticipants', 'max')"
              placeholder="Ex: 50"
              min="1">
            <div class="error-message" *ngIf="hasError('maxParticipants', 'required') || hasError('maxParticipants', 'min') || hasError('maxParticipants', 'max')">
              <small>{{ getErrorMessage('maxParticipants') }}</small>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group form-full-width" *ngIf="categories.length > 0">
        <label for="categoryId">Catégorie</label>
        <select 
          id="categoryId" 
          formControlName="categoryId"
          class="form-control">
          <option [ngValue]="null">Sélectionner une catégorie</option>
          <option *ngFor="let category of categories" [ngValue]="category.id">
            {{ category.name }}
          </option>
        </select>
      </div>

      <div class="form-group form-full-width">
        <label for="description">Description *</label>
        <textarea 
          id="description" 
          formControlName="description"
          class="form-control"
          [class.is-invalid]="hasError('description', 'required') || hasError('description', 'minlength') || hasError('description', 'maxlength')"
          rows="4"
          placeholder="Décrivez votre événement..."></textarea>
        <div class="error-message" *ngIf="hasError('description', 'required') || hasError('description', 'minlength') || hasError('description', 'maxlength')">
          <small>{{ getErrorMessage('description') }}</small>
        </div>
      </div>
     
      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onCancel()"
          [disabled]="isSubmitting">
          Annuler
        </button>
        <button 
          type="submit" 
          class="btn btn-primary" 
          [disabled]="eventForm.invalid || isSubmitting">
          <span *ngIf="isSubmitting">En cours...</span>
          <span *ngIf="!isSubmitting">{{ event ? 'Modifier' : 'Créer' }}</span>
        </button>
      </div>
    </form>
  </div>
</div>
